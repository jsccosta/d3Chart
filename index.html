<!DOCTYPE html>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js"></script>
    <script>
        // Load the data asynchronously.
        d3.json('/browsers.json', function(error, data) {

            // Handle errors getting or parsing the JSON data.
            if (error) {
                console.error('Error accessing or parsing the JSON file.');
                return error;
            }

            // Get the items and sort them by usage
            var items = data.values;
            items.sort(function(a, b) { return b.usage - a.usage; });

            // size of viz container
            var width = 700,
                height = 200;

            var browserList = items.map(function(d){return d.name;}),
                browserNames = d3.set(browserList).values();


            // create category scale with 10 levels
            var cScale = d3.scale.category10()
              .domain(browserNames);


            var force = d3.layout.force()
              .nodes(items)
              .links([])
              .size([width,height])
              .start();

            var containerDiv = d3.select('pre#force-item')
              .style('position','relative')
              .style('width', width + 'px')
              .style('height', height + 'px')
              .style('padding', 0)
              .style('background-color', '#eeeeec');

            // create a selection for the bubble divs, bind the data
            // array and set its attributes

            var bubbleDivs = containerDiv.selectAll('div.bubble')
              .data(items)
              .enter()
              .append('div')
              .attr('class', 'bubble')
              .style('position', 'absolute')
              .style('width', '10px')
              .style('height','10px')
              .style('border-radius', '5px')
              .style('background-color', function(d){
                return cScale(d.name);
              });

            // register a listener function for the force tick event, and
            // update the position of each tick on tick

            force.on('tick', function(){
              bubbleDivs
                .style('top', function(d){ return (d.y - 5) + 'px'; })
                .style('left', function(d){ return (d.x - 5) + 'px'; })
            })

            /*

        // Create a selection for the bubble divs, bind the data
        // array and set its attributes.
        var bubbleDivs = containerDiv.selectAll('div.bubble')
            .data(items)
            .enter()
            .append('div')
            .attr('class', 'bubble')
            .style('position', 'absolute')
            .style('width', '10px')
            .style('height', '10px')
            .style('border-radius', '5px')
            .style('background-color', function(d) {
                // Set the color corresponding to the browser.
                return cScale(d.name);
            });

        // Register a listener function for the force tick event, and
        // update the position of each div on tick.
        force.on('tick', function() {
            bubbleDivs
                .style('top', function(d) { return (d.y - 5) + 'px'; })
                .style('left', function(d) { return (d.x - 5)+ 'px'; });
        });
    });
            */

        });
    </script>
  </head>
  <body>
    <h1 class="section-title">Load Data</h1>

  <!-- Example of a data item -->
  <div class="chart-example">
    <pre id="force-item"></pre>
</div>

  </body>
</html>
